var Re=Object.defineProperty,Ue=Object.defineProperties;var ze=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var Ae=Object.prototype.hasOwnProperty,Ie=Object.prototype.propertyIsEnumerable;var H=(e,a,t)=>a in e?Re(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,o=(e,a)=>{for(var t in a||(a={}))Ae.call(a,t)&&H(e,t,a[t]);if(J)for(var t of J(a))Ie.call(a,t)&&H(e,t,a[t]);return e},d=(e,a)=>Ue(e,ze(a));import{a4 as Y,a5 as V,l as W,t as Pe,e as v,m as y,V as f,g as c,j as k,a as u,b,r as Me,y as Be,f as G,a6 as qe,a7 as Je,a8 as He,a9 as Ye,aa as Ve,x as We,ab as Ge}from"./vendor.82043be4.js";import{s as n,b as Q,P as X,n as h,c as Qe,g as Xe}from"./index.41fd16fe.js";import{B as w,a as Ze}from"./BaseKey.96296ec2.js";function et(e,a,t){var r=-1,s=e.length;a<0&&(a=-a>s?0:s+a),t=t>s?s:t,t<0&&(t+=s),s=a>t?0:t-a>>>0,a>>>=0;for(var i=Array(s);++r<s;)i[r]=e[r+a];return i}var tt=et,at=tt;function rt(e,a,t){var r=e.length;return t=t===void 0?r:t,!a&&t>=r?e:at(e,a,t)}var st=rt;function it(e){return e.split("")}var ot=it,Z="\\ud800-\\udfff",nt="\\u0300-\\u036f",lt="\\ufe20-\\ufe2f",ct="\\u20d0-\\u20ff",dt=nt+lt+ct,ut="\\ufe0e\\ufe0f",pt="["+Z+"]",D="["+dt+"]",O="\\ud83c[\\udffb-\\udfff]",mt="(?:"+D+"|"+O+")",ee="[^"+Z+"]",te="(?:\\ud83c[\\udde6-\\uddff]){2}",ae="[\\ud800-\\udbff][\\udc00-\\udfff]",ht="\\u200d",re=mt+"?",se="["+ut+"]?",yt="(?:"+ht+"(?:"+[ee,te,ae].join("|")+")"+se+re+")*",gt=se+re+yt,vt="(?:"+[ee+D+"?",D,te,ae,pt].join("|")+")",ft=RegExp(O+"(?="+O+")|"+vt+gt,"g");function _t(e){return e.match(ft)||[]}var bt=_t,kt=ot,wt=Y,xt=bt;function $t(e){return wt(e)?xt(e):kt(e)}var Ct=$t,Lt=st,St=Y,Tt=Ct,Kt=V;function Ft(e){return function(a){a=Kt(a);var t=St(a)?Tt(a):void 0,r=t?t[0]:a.charAt(0),s=t?Lt(t,1).join(""):a.slice(1);return r[e]()+s}}var Nt=Ft,Et=Nt,jt=Et("toUpperCase"),Dt=jt,Ot=V,Rt=Dt;function Ut(e){return Rt(Ot(e).toLowerCase())}var zt=Ut;let R,At="Baking";function U(e){n.commit("status/append",e),n.dispatch("status/scrollToEnd")}function It(e,a,t){ie();let r=n.state.keymap.templates.keymap;const s=n.getters["keymap/exportLayers"]({compiler:!0});let i=JSON.stringify(Object.assign(r,{keyboard:e,keymap:a,layout:t,layers:s}));console.log(i),n.getters["status/empty"]&&n.commit("status/append",`
`),n.commit("status/append",`* Sending ${e}:${a} with ${t}`),W.post(Q,i).then(l=>{const{status:p,data:g}=l;if(p===200)n.commit("app/setShowSpinner",!0),g.enqueued&&(n.commit("status/append",`
* Received job_id: ${g.job_id}`),n.dispatch("status/scrollToEnd"),n.commit("app/setJobID",g.job_id),z());else throw l}).catch(l=>{window.alert("Unexpected error ",console.log(l))})}function L(){n.commit("app/enableCompile"),setTimeout(()=>{n.commit("app/setShowSpinner",!1)},2e3)}function ie(){n.commit("app/disableCompile")}function Pt(){n.commit("app/setEnableDownloads")}function oe(){n.commit("app/setDisableDownloads")}function z(){const e=`${Q}/${n.state.app.jobID}`,a=performance.now();W.get(e).then(t=>{console.log(`response in ${performance.now()-a}ms`,t);let r,{status:s,data:i}=t;if(s!==200)console.log("Unexpected status",i.status),L();else{const l=Math.floor(2500+Math.random()*1e3);switch(console.log(`Next Poll in ${l}ms`),i.status){case"finished":n.commit("app/setSpinnerMsg","Done!"),n.commit("status/append",`
* Finished:
${i.result.output.replace(/\[.*m/gi,"")}`),n.commit("app/setFirmwareBinaryURL",i.result.firmware_binary_url),n.commit("app/setFirmwareSourceURL",i.result.firmware_source_url),n.commit("app/setKeymapSourceURL",i.result.firmware_keymap_url),n.commit("app/setFirmwareFile",i.result.firmware_filename),L(),Pt();break;case"queued":n.commit("app/setSpinnerMsg","Waiting for Oven"),r=R==="queued"?" .":`
* Queueing`,n.commit("status/append",r),setTimeout(z,l);break;case"running":n.commit("app/setSpinnerMsg",At),r=R==="running"?" .":`
* Running`,n.commit("status/append",r),setTimeout(z,l);break;case"unknown":n.commit("app/setSpinnerMsg","Abort! Abort!"),L();break;case"failed":n.commit("app/setSpinnerMsg","Abort! Abort!"),U(`
* Failed
`),i.result&&U(`* Error:
${i.result.output}`),L();break;default:n.commit("app/setSpinnerMsg","Abort! Abort!"),console.log("Unexpected status",i.status),L()}}n.dispatch("status/scrollToEnd"),R=i.status}).catch(t=>{window.alert("Unexpected error while compiling ",console.log(t))})}const T=Pe("This will clear your keymap - are you sure you want to <%= action %>?");var Mt=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{attrs:{id:"controller-top"}},[t("div",{staticClass:"topctrl"},[t("div",{staticClass:"topctrl-keyboards"},[t("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("favoriteKeyboard"),expression:"$t('favoriteKeyboard')"}],class:{active:e.isFavoriteKeyboard},attrs:{id:"favorite-keyboard"},on:{click:e.favKeyboard}},[t("font-awesome-icon",{attrs:{icon:"star",size:"lg","fixed-width":""}})],1),t("label",{staticClass:"drop-label",attrs:{id:"drop-label-keyboard"}},[e._v(e._s(e.$t("keyboard.label"))+":")]),t("v-select",{ref:"select",attrs:{maxHeight:"600px",clearable:!1,options:e.keyboards},on:{"search:focus":e.opened,"search:blur":e.blur},model:{value:e.keyboard,callback:function(r){e.keyboard=r},expression:"keyboard"}})],1),t("div",{staticClass:"topctrl-layouts"},[t("label",{staticClass:"drop-label",attrs:{id:"drop-label-version"}},[e._v(e._s(e.$t("layout.label"))+":")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.layout,expression:"layout"}],attrs:{id:"layout"},on:{change:function(r){var s=Array.prototype.filter.call(r.target.options,function(i){return i.selected}).map(function(i){var l="_value"in i?i._value:i.value;return l});e.layout=r.target.multiple?s:s[0]}}},e._l(e.layouts,function(r,s){return t("option",{key:s,domProps:{value:s}},[e._v(" "+e._s(s)+" ")])}),0)]),t("div",{staticClass:"topctrl-keymap-name"},[t("label",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("keymapName.label"),expression:"$t('keymapName.label')"}],staticClass:"drop-label",class:e.fontAdjustClasses},[e._v(e._s(e.$t("keymapName.label"))+":")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.keymapName,expression:"keymapName"}],attrs:{id:"keymap-name",type:"text",placeholder:e.$t("keymapName.placeholder"),spellcheck:"false"},domProps:{value:e.keymapName},on:{focus:e.focus,blur:e.blur,input:function(r){r.target.composing||(e.keymapName=r.target.value)}}})]),t("div",{staticClass:"topctrl-controls"},[t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("loadDefault.title"),expression:"$t('loadDefault.title')"}],attrs:{id:"load-default"},on:{click:e.loadDefault}},[e._v(" "+e._s(e.$t("loadDefault.label"))+" ")]),t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("compile.title"),expression:"$t('compile.title')"}],attrs:{id:"compile",disabled:e.compileDisabled},on:{click:e.compile}},[e._v(" "+e._s(e.$t("compile.label"))+" ")])])])])},Bt=[];const{isNavigationFailure:K,NavigationFailureType:F}=G,qt={name:"ControllerTop",computed:d(o(o(o({},v("keymap",["isDirty"])),v("app",["exportKeymapName"])),y("app",["keyboard","keyboards","layouts","layout","configuratorSettings","compileDisabled"])),{isFavoriteKeyboard(){return this.keyboard===this.configuratorSettings.favoriteKeyboard},realKeymapName(){return this.$store.getters["app/keymapName"]},keyboard:{get(){return this.$store.state.app.keyboard},set(e){if(this.isDirty&&!confirm(T({action:"change your keyboard"}))){var a=this.keyboard;return this.setKeyboard(""),f.nextTick(()=>{this.setKeyboard(a)}),!1}this.updateKeyboard(e).then(()=>{this.loadDefault(!0)})}},layout:{get(){return this.$store.state.app.layout},set(e){if(this.isDirty&&!confirm(T({action:"change your layout"}))){const a=this.layout;return this.setLayout(""),f.nextTick(()=>this.setLayout(a)),!1}this.clear(),this.updateLayout({target:{value:e}})}},fontAdjustClasses(){let e=[];return this.$t("keymapName.label").length>12&&e.push("half-size"),e.join(" ")}}),watch:{keymapName:function(e,a){e!==a&&this.updateKeymapName(e)},realKeymapName:function(e,a){e!==a&&(this.keymapName=e)},$route:function(e){if(e.query){const a=e.query.filter;if(!c(a)){this.updateFilter(a),this.updateKeyboard(k(this.keyboards));return}if(e.params){this.setLayout(e.params.layoutP),this.previewRequested||this.updateKeyboard(e.params.keyboardP);return}}}},methods:d(o(o(o(o({},u("keymap",["resizeConfig","clear"])),u("app",["setLayout","stopListening","startListening","previewRequested","setKeyboard","setKeymapName"])),b("app",["changeKeyboard","fetchKeyboards","loadDefaultKeymap","setFavoriteKeyboard"])),b("keymap",["initTemplates","load_converted_keymap"])),{loadDefault(e=!1){if(this.isDirty&&!confirm(T({action:"load default keymap"})))return!1;const a=this.$store;this.loadDefaultKeymap().then(t=>t&&(console.log(t),this.updateLayout(t.layout),new Promise(s=>a.commit("keymap/setLoadingKeymapPromise",s)).then(async()=>{this.updateKeymapName("");const s=await this.load_converted_keymap(t.layers);let i=this.$t("statsTemplate",s);(s.warnings.length>0||s.errors.length>0)&&(i=`${i}
${s.warnings.join(`
`)}`,i=`${i}
${s.errors.join(`
`)}`),e?(a.commit("status/append",i),a.commit("status/deferredMessage",i)):a.commit("keymap/setDirty")}))).catch(t=>{U(`
* Sorry there is no default for the ${this.keyboard} keyboard... yet!`),console.log("error loadDefault",t)})},async initializeKeyboards(){console.info(`initializeKeyboards: ${this.keyboard}`);let e="";if(this.$route.query){let r=this.$route.query.filter;c(r)||this.updateFilter(r)}this.keyboard?(e=this.keyboard,console.info(`Loading keyboard from store:${e}`)):e=this.keyboards[Me(this.keyboards.length-1)],console.log(`_keyboard:${e}`);let{keyboardP:a,layoutP:t}=this.$route.params;return Be(a)&&a!==""&&a!==X&&(e=a,this.firstRun=!1),this.setLayout(t),this.updateKeyboard(e)},updateKeyboard(e){return this.firstRun&&(this.firstRun=!1),this.changeKeyboard(e).then(this.postUpdateKeyboard)},favKeyboard(){this.keyboard===this.configuratorSettings.favoriteKeyboard?this.setFavoriteKeyboard(""):this.setFavoriteKeyboard(this.keyboard)},postUpdateKeyboard(){this.$store.commit("status/clear"),this.$router.replace({path:`/${this.keyboard}/${this.layout}`}).catch(e=>{if(!K(e,F.duplicated)&&!K(e,F.cancelled))throw err}),this.$store.dispatch("status/viewReadme",this.keyboard),oe()},updateLayout(e){const a=e.target?e.target.value:e;this.setLayout(a),this.$router.replace({path:`/${this.keyboard}/${this.layout}`}).catch(t=>{if(!K(t,F.duplicated)&&!K(t,F.cancelled))throw err})},updateKeymapName(e){this.keymapName=e,this.setKeymapName(e)},compile(){let e=this.realKeymapName,a=this.exportKeymapName;e=e===""?a.slice(this.keyboard.length+1,a.length):e,It(this.keyboard,e,this.layout)},updateFilter(e){this.$store.commit("app/setFilter",e)},opened(){this.stopListening();const e=this.$refs.select;f.nextTick(()=>{const a=e.$el.querySelector(".vs__dropdown-menu .vs__dropdown-option--selected");if(a){var t=a.offsetTop-a.offsetHeight;e.typeAheadPointer=this.keyboards.indexOf(this.keyboard),e.$el.scrollTo(t>0?t:0,0)}})},focus(){this.stopListening()},blur(){this.startListening()}}),data:()=>({keymapName:"",firstRun:!0}),async mounted(){await this.initializeKeyboards(),this.loadDefault(!0),this.initTemplates()}},ne={};var Jt=h(qt,Mt,Bt,!1,Ht,null,null,null);function Ht(e){for(let a in ne)this[a]=ne[a]}var Yt=function(){return Jt.exports}(),Vt=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{attrs:{id:"status"}},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],ref:"terminal",class:e.terminalClasses,attrs:{id:"terminal",readonly:""},domProps:{value:e.message},on:{input:function(r){r.target.composing||(e.message=r.target.value)}}}),e._v(" "),t("label",{class:e.terminalClasses,attrs:{for:"toggle-terminal",id:"toggle-terminal-label"},on:{click:e.toggleTerminal}},[e._v(e._s(e.$t("toggleTerminal.label")))]),t("font-awesome-icon",{class:e.terminalClasses,attrs:{icon:"chevron-up",size:"lg","fixed-width":"",id:"toggle-terminal",title:e.$t("toggleTerminal.title")},on:{click:e.toggleTerminal}})],1)},Wt=[];const Gt={name:"status-panel",watch:{message(e,a){this.scrollToLatest&&e!==a&&(this.scrollToEnd(),this.doneScroll())},compileDisabled(e){e===!0&&(this.isTerminalOpen=!0)}},methods:d(o({},u("status",["doneScroll"])),{scrollToEnd(){let e=this.$refs.terminal;this.$nextTick(()=>{e.scrollTop=e.scrollHeight})},toggleTerminal(){this.isTerminalOpen=!this.isTerminalOpen}}),computed:d(o(o({},v("status",["message","scrollToLatest"])),y("app",["compileDisabled"])),{terminalClasses(){const e=[];return this.isTerminalOpen||e.push("collapsed"),e.join(" ")}}),data:()=>({isTerminalOpen:!0})},le={};var Qt=h(Gt,Vt,Wt,!1,Xt,null,null,null);function Xt(e){for(let a in le)this[a]=le[a]}var Zt=function(){return Qt.exports}(),ea=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("button",{staticClass:"fixed-size",attrs:{id:"fwFile",title:e.$t("flashFirmware.title"),disabled:e.disableDownloadBinary},on:{click:e.autoFlashFirmware}},[t("font-awesome-icon",{attrs:{icon:"download",size:"lg","fixed-width":""}}),e._v(" "+e._s(e.$t("flashFirmware.label"))+" ")],1),t("button",{staticClass:"fixed-size",attrs:{id:"fwFile",title:e.$t("flashFile.title"),disabled:e.disableFlashFile},on:{click:e.flashFirmware}},[t("font-awesome-icon",{attrs:{icon:"download",size:"lg","fixed-width":""}}),e._v(" "+e._s(e.$t("flashFile.label"))+" ")],1)])},ta=[];const aa={name:"ElectronBottomControls",props:{disableDownloadBinary:{type:Boolean,required:!0,default:!0}},computed:d(o({},y("app",["keyboard","firmwareBinaryURL","firmwareFile"])),{disableFlashFile(){return!window.Bridge.enableFlashing},disableFlashSource(){return!window.Bridge.enableFlashing||c(this.firmwareBinaryURL)||this.firmwareBinaryURL===""}}),methods:{flashFirmware(){window.Bridge.autoFlash=!1,window.Bridge.flashFile()},autoFlashFirmware(){window.Bridge.autoFlash=!0,window.Bridge.flashURL(k(this.firmwareBinaryURL),this.keyboard,this.firmwareFile)}}},ce={};var ra=h(aa,ea,ta,!1,sa,null,null,null);function sa(e){for(let a in ce)this[a]=ce[a]}var ia=function(){return ra.exports}();const oa={"2_milk":{target:"spaceman/2_milk"},"aeboards/ext65":{target:"aeboards/ext65/rev1"},"ai03/equinox":{target:"ai03/equinox/rev1"},aleth42:{target:"aleth42/rev1"},alice:{target:"tgr/alice"},angel17:{target:"angel17/alpha"},angel64:{target:"angel64/alpha"},aplx6:{target:"aplyard/aplx6/rev1"},at101_blackheart:{target:"at101_bh"},"atom47/rev2":{target:"maartenwut/atom47/rev2"},"atom47/rev3":{target:"maartenwut/atom47/rev3"},bakeneko65:{target:"bakeneko65/rev2"},bear_65:{target:"jacky_studio/bear_65"},bear_face:{target:"bear_face/v1"},bm16a:{target:"kprepublic/bm16a"},bm16s:{target:"kprepublic/bm16s"},bm40hsrgb:{target:"kprepublic/bm40hsrgb"},bm43a:{target:"kprepublic/bm43a"},bm60poker:{target:"kprepublic/bm60poker"},bm60rgb:{target:"kprepublic/bm60rgb"},bm60rgb_iso:{target:"kprepublic/bm60rgb_iso"},bm65iso:{target:"kprepublic/bm65iso"},bm68rgb:{target:"kprepublic/bm68rgb"},"bpiphany/pegasushoof":{target:"bpiphany/pegasushoof/2013"},chavdai40:{target:"chavdai40/rev1"},"candybar/lefty":{target:"tkc/candybar/lefty"},"candybar/righty":{target:"tkc/candybar/righty"},canoe:{target:"percent/canoe"},"clawsome/gamebuddy":{target:"clawsome/gamebuddy/v1_0"},"cmm_studio/saka68":{target:"cmm_studio/saka68/solder"},cospad:{target:"kprepublic/cospad"},"crkbd/rev1/legacy":{target:"crkbd/rev1"},"crkbd/rev1/common":{target:"crkbd/rev1"},daisy:{target:"ktec/daisy"},"doro67/multi":{layouts:{LAYOUT_ansi:"LAYOUT_65_ansi_blocker"}},"doro67/regular":{layouts:{LAYOUT:"LAYOUT_65_ansi_blocker"}},"doro67/rgb":{layouts:{LAYOUT:"LAYOUT_65_ansi_blocker"}},drakon:{target:"jagdpietr/drakon"},dumbpad:{target:"dumbpad/v0x"},"durgod/k320":{target:"durgod/k3x0/k320/base"},"dztech/dz60rgb":{target:"dztech/dz60rgb/v1"},"dztech/dz60rgb_ansi":{target:"dztech/dz60rgb_ansi/v1"},"dztech/dz60rgb_wkl":{target:"dztech/dz60rgb_wkl/v1"},"dztech/dz65rgb":{target:"dztech/dz65rgb/v1"},"dztech/volcano660":{target:"ilumkb/volcano660"},eek:{target:"eek/silk_down"},ergodone:{target:"ktec/ergodone"},ergoinu:{target:"dm9records/ergoinu"},"exclusive/e85":{target:"exclusive/e85/hotswap"},function96:{target:"function96/v1"},gh60:{target:"gh60/revc"},"gmmk/pro":{target:"gmmk/pro/ansi"},"handwired/ferris":{target:"ferris/0_1"},"handwired/p1800fl":{target:"team0110/p1800fl"},"handwired/pill60":{target:"handwired/pill60/bluepill"},"helix/pico/sc/back":{target:"helix/pico/sc"},"helix/pico/sc/under":{target:"helix/pico/sc"},"helix/rev2/back/oled":{target:"helix/rev2/back"},"helix/rev2/oled":{target:"helix/rev2"},"helix/rev2/oled/back":{target:"helix/rev2/back"},"helix/rev2/oled/under":{target:"helix/rev2/under"},"helix/rev2/sc/back":{target:"helix/rev2/sc"},"helix/rev2/sc/oled":{target:"helix/rev2/sc"},"helix/rev2/sc/oledback":{target:"helix/rev2/sc"},"helix/rev2/sc/oledunder":{target:"helix/rev2/sc"},"helix/rev2/sc/under":{target:"helix/rev2/sc"},"helix/rev2/under":{target:"helix/rev2/sc"},"helix/rev2/under/oled":{target:"helix/rev2/under"},id80:{target:"id80/ansi"},idb_60:{target:"idb/idb_60",layouts:{LAYOUT:"LAYOUT_all"}},jj40:{target:"kprepublic/jj40"},jj4x4:{target:"kprepublic/jj4x4"},jj50:{target:"kprepublic/jj50"},jones:{target:"jones/v03_1"},katana60:{target:"rominronin/katana60/rev1"},"kbdfans/kbd67mkiirgb":{target:"kbdfans/kbd67/mkiirgb",layouts:{LAYOUT:"LAYOUT_65_ansi_blocker"}},"kbdfans/kbd67/mkiirgb":{target:"kbdfans/kbd67/mkiirgb/v1"},"keebio/dsp40":{target:"keebio/dsp40/rev1"},"keycapsss/kimiko":{target:"keycapsss/kimiko/rev1"},"keycapsss/plaid_pad":{target:"keycapsss/plaid_pad/rev1"},"kprepublic/bm60poker":{target:"kprepublic/bm60hsrgb_poker/rev1"},"kprepublic/bm60rgb":{target:"kprepublic/bm60hsrgb/rev1"},"kprepublic/bm60rgb_iso":{target:"kprepublic/bm60hsrgb_iso/rev1"},"kprepublic/bm65iso":{target:"kprepublic/bm65hsrgb_iso"},"kprepublic/bm68rgb":{target:"kprepublic/bm68hsrgb"},"kprepublic/bm80":{target:"kprepublic/bm80hsrgb"},kudox:{target:"kudox/rev1"},"kyria/rev1":{target:"splitkb/kyria/rev1"},"lfkeyboards/lfk78":{target:"lfkeyboards/lfk78/revj"},"lfkeyboards/smk65":{target:"lfkeyboards/smk65/revb"},"maartenwut/atom47/rev2":{target:"evyd13/atom47/rev2"},"maartenwut/atom47/rev3":{target:"evyd13/atom47/rev3"},"maartenwut/eon40":{target:"evyd13/eon40"},"maartenwut/eon65":{target:"evyd13/eon65"},"maartenwut/eon75":{target:"evyd13/eon75"},"maartenwut/eon87":{target:"evyd13/eon87"},"maartenwut/eon95":{target:"evyd13/eon95"},"maartenwut/gh80_1800":{target:"evyd13/gh80_1800"},"maartenwut/gh80_3700":{target:"evyd13/gh80_3700"},"maartenwut/minitomic":{target:"evyd13/minitomic"},"maartenwut/mx5160":{target:"evyd13/mx5160"},"maartenwut/nt660":{target:"evyd13/nt660"},"maartenwut/omrontkl":{target:"evyd13/omrontkl"},"maartenwut/plain60":{target:"evyd13/plain60"},"maartenwut/pockettype":{target:"evyd13/pockettype"},"maartenwut/quackfire":{target:"evyd13/quackfire"},"maartenwut/solheim68":{target:"evyd13/solheim68"},"maartenwut/ta65":{target:"evyd13/ta65"},"maartenwut/wasdat":{target:"evyd13/wasdat"},"maartenwut/wasdat_code":{target:"evyd13/wasdat_code"},"maartenwut/wonderland":{target:"evyd13/wonderland"},"mechlovin/hannah910":{target:"mechlovin/hannah910/rev1"},"mechlovin/adelais/rgb_led":{target:"mechlovin/adelais/rgb_led/rev1"},"mechlovin/adelais/standard_led":{target:"mechlovin/adelais/standard_led/rev2"},"mechlovin/delphine":{target:"mechlovin/delphine/mono_led"},"mechlovin/hannah60rgb":{target:"mechlovin/hannah60rgb/rev1"},"mechlovin/hannah65/mechlovin9":{target:"mechlovin/mechlovin9"},"melgeek/z70ultra":{target:"melgeek/z70ultra/rev1"},"mechlovin/hannah65":{target:"mechlovin/hannah65/rev1"},model01:{target:"keyboardio/model01"},m0lly:{target:"tkc/m0lly"},"montsinger/rebound":{target:"montsinger/rebound/rev1"},"nckiibs/flatbread60":{target:"delikeeb/flatbread60"},"nckiibs/vaguettelite":{target:"delikeeb/vaguettelite"},"nckiibs/vanana/rev1":{target:"delikeeb/vanana/rev1"},"nckiibs/vanana/rev2":{target:"delikeeb/vanana/rev2"},"nckiibs/vaneela":{target:"delikeeb/vaneela"},"nckiibs/vaneelaex":{target:"delikeeb/vaneelaex"},"nckiibs/waaffle/rev3/elite_c":{target:"delikeeb/waaffle/rev3/elite_c"},"nckiibs/waaffle/rev3/pro_micro":{target:"delikeeb/waaffle/rev3/pro_micro"},nomu30:{target:"nomu30/rev1"},"noxary/268_2":{layouts:{LAYOUT:"LAYOUT_65_ansi_blocker"}},oddball:{target:"oddball/v1"},omnikey_blackheart:{target:"omnikey_bh"},"pabile/p20":{target:"pabile/p20/ver1"},"pancake/feather":{target:"spaceman/pancake/feather"},"pancake/promicro":{target:"spaceman/pancake/promicro"},"peiorisboards/ixora":{target:"coarse/ixora"},"percent/canoe":{layouts:{LAYOUT_iso:"LAYOUT_65_iso_blocker"}},plaid:{target:"dm9records/plaid"},plain60:{target:"maartenwut/plain60"},"ploopyco/trackball":{target:"ploopyco/trackball/rev1_005"},polilla:{target:"polilla/rev1"},"preonic/rev1":{layouts:{LAYOUT_preonic_grid:"LAYOUT_ortho_5x12"}},"preonic/rev2":{layouts:{LAYOUT_preonic_grid:"LAYOUT_ortho_5x12"}},"preonic/rev3":{layouts:{LAYOUT_preonic_grid:"LAYOUT_ortho_5x12"}},"primekb/prime_l":{target:"primekb/prime_l/v1"},"primekb/prime_l_v2":{target:"primekb/prime_l/v2"},"projectkb/alice":{target:"projectkb/alice/rev1"},"rama/koyu":{target:"wilba_tech/rama_works_koyu"},"rama/m6_a":{target:"wilba_tech/rama_works_m6_a"},"rama/m6_b":{target:"wilba_tech/rama_works_m6_b"},"rama/m10_b":{target:"wilba_tech/rama_works_m10_b"},"rama/m60_a":{target:"wilba_tech/rama_works_m60_a"},"rama/u80_a":{target:"wilba_tech/rama_works_u80_a"},"ramonimbao/herringbone":{target:"ramonimbao/herringbone/v1"},"rgbkb/pan":{target:"rgbkb/pan/rev1/32a"},"rgbkb/pan/rev1":{target:"rgbkb/pan/rev1/32a"},romac:{target:"kingly_keys/romac"},ropro:{target:"kingly_keys/ropro"},"s7_elephant/rev1":{target:"jacky_studio/s7_elephant/rev1"},"s7_elephant/rev2":{target:"jacky_studio/s7_elephant/rev2"},satan:{target:"gh60/satan"},skog:{target:"percent/skog"},southpaw75:{target:"fr4/southpaw75"},speedo:{target:"cozykeys/speedo/v2"},staryu:{target:"ktec/staryu"},stoutgat:{target:"tkw/stoutgat/v1"},suihankey:{target:"suihankey/split/alpha"},ta65:{target:"maartenwut/ta65"},tartan:{target:"dm9records/tartan"},tkc1800:{target:"tkc/tkc1800"},"tkw/stoutgat/v2":{target:"tkw/stoutgat/v2/f411"},tokyo60:{target:"tokyokeyboard/tokyo60"},underscore33:{target:"underscore33/rev1"},vinta:{target:"coarse/vinta",layouts:{LAYOUT_67_ansi:"LAYOUT_65_ansi_blocker"}},wasdat:{target:"maartenwut/wasdat"},"westfoxtrot/cypher":{target:"westfoxtrot/cypher/rev1"},"whale/sk":{target:"whale/sk/v3"},xd002:{target:"xiudi/xd002"},"xd004/v1":{target:"xiudi/xd004/v1"},"xd60/rev2":{target:"xiudi/xd60/rev2"},"xd60/rev3":{target:"xiudi/xd60/rev3"},xd68:{target:"xiudi/xd68"},xd75:{target:"xiudi/xd75"},xd84:{target:"xiudi/xd84"},xd84pro:{target:"xiudi/xd84pro"},xd87:{target:"xiudi/xd87"},xd96:{target:"xiudi/xd96"},"xelus/dawn60":{target:"xelus/dawn60/rev1"},"xelus/valor":{target:"xelus/valor/rev1"},yd60mq:{target:"yd60mq/12led"},ymd75:{target:"ymd75/rev1"},z150_blackheart:{target:"z150_bh"},zeal60:{target:"wilba_tech/zeal60"},zeal65:{target:"wilba_tech/zeal65"}};var de={lookup:oa},na=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"botctrl",attrs:{id:"controller-bottom"}},[t("VeilComponent",{attrs:{isVisible:e.isVeilOpened},scopedSlots:e._u([{key:"contents",fn:function(){return[t("div",{staticClass:"input-url-modal"},[t("div",[t("label",{attrs:{for:"url-import-field"}},[e._v("Url:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.urlImport,expression:"urlImport"}],ref:"urlimport",attrs:{id:"url-import-field",type:"text"},domProps:{value:e.urlImport},on:{input:function(r){r.target.composing||(e.urlImport=r.target.value)}}})]),t("div",[t("button",{on:{click:e.importUrlkeymap}},[e._v("Load")]),t("button",{on:{click:e.closeVeil}},[e._v("cancel")])])])]},proxy:!0}])}),t("div",{staticClass:"botctrl-1-1"},[t("button",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:e.$t("downloadJSON.title"),expression:"$t('downloadJSON.title')",modifiers:{bottom:!0}}],attrs:{id:"export"},on:{click:e.exportJSON}},[t("font-awesome-icon",{attrs:{icon:"download",size:"lg","fixed-width":""}})],1),t("span",{staticClass:"label-button"},[e._v(e._s(e.$t("downloadJSON.label")))]),t("button",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:e.$t("importJSON.title"),expression:"$t('importJSON.title')",modifiers:{bottom:!0}}],attrs:{id:"import"},on:{click:e.importKeymap}},[t("font-awesome-icon",{attrs:{icon:"upload",size:"lg","fixed-width":""}})],1),t("button",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:e.$t("importUrlJSON.title"),expression:"$t('importUrlJSON.title')",modifiers:{bottom:!0}}],attrs:{id:"import-url"},on:{click:e.openVeil}},[t("font-awesome-icon",{attrs:{icon:"cloud-upload-alt",size:"lg","fixed-width":""}})],1),t("a",{staticClass:"button-padding",attrs:{rel:"noopener",target:"_blank",href:e.configuratorDocsURL}},[t("button",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:e.$t("keymapHelp.title"),expression:"$t('keymapHelp.title')",modifiers:{bottom:!0}}],staticClass:"ui-button",attrs:{id:"keymapHelp"}},[t("font-awesome-icon",{attrs:{icon:"question-circle",size:"lg","fixed-width":""}}),t("span",{staticClass:"hide-small"},[e._v(e._s(e.$t("keymapHelp.label")))])],1)]),t("button",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:e.$t("printKeymap.title"),expression:"$t('printKeymap.title')",modifiers:{bottom:!0}}],attrs:{id:"printkeymaps"},on:{click:e.printKeymaps}},[t("font-awesome-icon",{attrs:{icon:"print",size:"lg","fixed-width":""}}),t("span",{staticClass:"hide-small"},[e._v(e._s(e.$t("printKeymap.label")))])],1),t("button",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:e.$t("testKeys.title"),expression:"$t('testKeys.title')",modifiers:{bottom:!0}}],attrs:{id:"testkeys"},on:{click:e.testKeys}},[t("font-awesome-icon",{attrs:{icon:"keyboard",size:"lg","fixed-width":""}}),t("span",{staticClass:"hide-small"},[e._v(e._s(e.$t("testKeys.label")))])],1),t("input",{ref:"fileImportElement",attrs:{id:"fileImport",type:"file",accept:"application/json"},on:{change:e.fileImportChanged}}),t("input",{ref:"infoPreviewElement",attrs:{id:"infoPreview",type:"file",accept:"application/json"},on:{change:e.infoPreviewChanged}})]),this.electron?t("div",{staticClass:"botctrl-1-2"},[t("ElectronBottomControls",{attrs:{disableDownloadBinary:e.disableDownloadBinary}})],1):t("div",{staticClass:"botctrl-1-2"},[t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("downloadSource.title"),expression:"$t('downloadSource.title')"}],staticClass:"fixed-size",attrs:{id:"source",disabled:e.disableDownloadSource},on:{click:e.downloadSource}},[t("font-awesome-icon",{attrs:{icon:"download",size:"lg","fixed-width":""}}),e._v(" "+e._s(e.$t("downloadSource.label"))+" ")],1),t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("downloadFirmware.title"),expression:"$t('downloadFirmware.title')"}],attrs:{id:"fwFile",disabled:e.disableDownloadBinary},on:{click:e.downloadFirmware}},[t("font-awesome-icon",{attrs:{icon:"download",size:"lg","fixed-width":""}}),e._v(" "+e._s(e.$t("downloadFirmware.label"))+" ")],1)]),e.downloadElementEnabled?t("div",[t("a",{ref:"downloadElement",attrs:{href:e.urlEncodedData,download:e.filename}})]):e._e()],1)},la=[];const{isNavigationFailure:ue,NavigationFailureType:pe}=G,ca="data:application/json;charset=utf-8,",da={name:"bottom-controller",components:{ElectronBottomControls:ia},computed:d(o(o(o(o({},y("keymap",["templates"])),y("app",["keyboard","layout","previewRequested","enableDownloads","firmwareBinaryURL","firmwareSourceURL","keymapSourceURL","author","notes","electron"])),v("app",["exportKeymapName","firmwareFile"])),v("keymap",["isDirty","exportLayers"])),{disableDownloadKeymap(){return!this.enableDownloads&&this.keymapSourceURL!==""},disableDownloadSource(){return!this.enableDownloads&&this.firmwareSourceURL!==""},disableDownloadBinary(){return!this.enableDownloads||c(this.firmwareBinaryURL)||this.firmwareBinaryURL===""},configuratorDocsURL(){return"https://docs.qmk.fm/#/configurator_troubleshooting"}}),watch:{previewRequested(e){e&&(this.$refs.infoPreviewElement.click(),window.setTimeout(()=>this.dismissPreview()))}},methods:d(o(o(o(o(o(o(o(o({},u("app",["dismissPreview","enablePreview","setAuthor","setKeyboard","setKeymapName","setLayout","setNotes","startListening","stopListening"])),u("keymap",["setLoadingKeymapPromise","setDirty","clear"])),u("keymap",{clearKeymap:"clear"})),u("status",["deferredMessage","append"])),u("status",{clearStatus:"clear"})),b("app",["changeKeyboard","loadKeymapFromUrl","loadLayouts"])),b("status",["viewReadme"])),b("keymap",["load_converted_keymap"])),{async importUrlkeymap(){try{const e=await this.loadKeymapFromUrl(this.urlImport);await this.loadJsonData(e)}catch{alert("Seems like there is an issue trying to get the file")}this.closeVeil()},openVeil(){this.isVeilOpened=!0,this.stopListening(),f.nextTick(()=>{this.$refs.urlimport.focus()})},closeVeil(){this.startListening(),this.urlImport="",this.isVeilOpened=!1},exportJSON(){let e=this.exportLayers({compiler:!1});const{keymap:a}=this.templates;let t=Object.assign(a,{keyboard:this.keyboard,keymap:this.exportKeymapName,layout:this.layout,layers:e,author:this.author,notes:this.notes});this.download(`${this.exportKeymapName}.json`,JSON.stringify(t,null,2))},download(e,a){this.urlEncodedData=ca+encodeURIComponent(a),this.filename=e,this.downloadElementEnabled=!0,f.nextTick(()=>{this.$refs.downloadElement.click(),this.downloadElementEnabled=!1})},downloadFirmware(){this.urlEncodedData=k(this.firmwareBinaryURL),this.filename=this.firmwareFile,this.downloadElementEnabled=!0,f.nextTick(()=>{this.$refs.downloadElement.click(),this.downloadElementEnabled=!1})},downloadSource(){this.urlEncodedData=k(this.firmwareSourceURL),this.filename="source.zip",this.downloadElementEnabled=!0,f.nextTick(()=>{this.$refs.downloadElement.click(),this.downloadElementEnabled=!1})},downloadKeymap(){this.urlEncodedData=k(this.keymapSourceURL),this.filename="source.zip",this.downloadElementEnabled=!0,f.nextTick(()=>{this.$refs.downloadElement.click(),this.downloadElementEnabled=!1})},importKeymap(){if(this.isDirty&&!confirm(T({action:"change keyboard and layout"})))return!1;this.$refs.fileImportElement.click()},fileImportChanged(){var e=this.$refs.fileImportElement.files;this.reader=new FileReader,this.reader.onload=this.importJSONOnLoad,this.reader.readAsText(k(e)),this.$refs.fileImportElement.value=""},remapKeyboard(e,a,t=0){let r=!1;if(t>10)console.warn(`possible remap loop detected with ${e}:${a}`);else if(!c(de.lookup[e])){const{target:s,layouts:i}=de.lookup[e];c(s)||(e=s,r=!0),!c(i)&&!c(i[a])&&(a=i[a],r=!0)}return r?this.remapKeyboard(e,a,++t):{keyboard:e,layout:a}},async loadJsonData(e){if(e.version&&e.keyboard&&e.keyboard.settings){alert(this.$t("errors.kbfirmwareJSONUnsupported"));return}if(Qe(e)){alert(this.$t("errors.unknownJSON"));return}if(!c(e.author)){const{author:t,notes:r}=e;this.setAuthor(t),this.setNotes(r)}e=Object.assign(e,this.remapKeyboard(e.keyboard,e.layout)),this.setKeyboard(e.keyboard);try{await this.changeKeyboard(this.keyboard),this.setLayout(e.layout),await this.$router.replace({path:`/${e.keyboard}/${e.layout}`}).catch(i=>{if(!ue(i,pe.duplicated)&&!ue(i,pe.cancelled))throw i});var a=this.$store;let t=await new Promise(i=>this.setLoadingKeymapPromise(i));const r=await this.load_converted_keymap(e.layers);let s=this.$t("statsTemplate",r);(r.warnings.length>0||r.errors.length>0)&&(s=`${s}
${r.warnings.join(`
`)}`,s=`${s}
${r.errors.join(`
`)}`),this.deferredMessage(s),this.viewReadme(this.keyboard).then(()=>{let i=e.keymap;i.endsWith(".json")&&(i=i.replace(/.json$/,"")),this.setKeymapName(i),this.setDirty()}),oe()}catch(t){console.log("Unexpected error",t)}},async importJSONOnLoad(){try{const e=JSON.parse(this.reader.result);await this.loadJsonData(e)}catch(e){console.log(e),alert(this.$t("errors.invalidQMKKeymap"));return}},infoPreviewChanged(){var e=this.$refs.infoPreviewElement.files;e.length!==0&&(this.enablePreview(),ie(),this.reader=new FileReader,this.reader.onload=this.previewInfoOnLoad,this.reader.readAsText(k(e)),this.$refs.infoPreviewElement.value="")},async previewInfoOnLoad(){const e=this.reader.result;let a;try{a=JSON.parse(e)}catch(r){console.log(r),alert("Sorry, that doesn't appear to be a valid QMK info file.");return}this.setKeyboard(X);const t=this.$store;try{await this.loadLayouts(a),this.setLayout("  "),f.nextTick(()=>{const r=Xe(t.state.app.layouts);this.clearKeymap(),this.setLayout(r),this.clearKeymap(),this.setKeymapName("info.json preview"),this.clearStatus(),this.append([`Preview info.json mode
`,`For Developers only, working on new keyboards.
`,"	ctrl, alt, u - see key sizes","	ctrl, alt, n - cycle colorways","	layout drop down to preview layouts"].join(`
`))})}catch(r){console.log("unexpected error",r)}},printKeymaps(){this.$router.push("/print")},testKeys(){this.$router.push("/test")}}),data:()=>({isVeilOpened:!1,downloadElementEnabled:!1,urlEncodedData:"",filename:"",urlImport:"",reader:void 0})},me={};var ua=h(da,na,la,!1,pa,null,null,null);function pa(e){for(let a in me)this[a]=me[a]}var ma=function(){return ua.exports}(),ha=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"key key-layer",class:e.myclasses,style:e.mystyles,attrs:{draggable:"",id:e.myid},on:{click:e.clicked,dragstart:e.dragstart,dragend:e.dragend,drop:function(r){return r.stopPropagation(),e.dropped.apply(null,arguments)},dragleave:function(r){return r.preventDefault(),e.dragleave.apply(null,arguments)},dragover:function(r){return r.preventDefault(),e.dragover.apply(null,arguments)},dragenter:function(r){return r.preventDefault(),e.dragenter.apply(null,arguments)}}},[t("div",{class:""+(e.hasFocus?"key-layer-title-focus":"key-layer-title")},[e._v(e._s(e.displayName)),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"input",staticClass:"key-layer-input",style:"width:calc("+this.charLength+"ch + 6px);",attrs:{spellcheck:"false"},domProps:{value:e.value},on:{focus:function(r){return r.preventDefault(),r.stopPropagation(),e.focus.apply(null,arguments)},blur:function(r){return r.preventDefault(),r.stopPropagation(),e.blur.apply(null,arguments)},click:function(r){return r.preventDefault(),r.stopPropagation(),e.clickignore.apply(null,arguments)},input:function(r){r.target.composing||(e.value=r.target.value)}}})])]),e.visible?t("div",{staticClass:"remove",on:{click:function(r){return r.stopPropagation(),e.remove.apply(null,arguments)}}},[e._v("x")]):e._e()])},ya=[];const ga={name:"any-key",extends:w,data(){return{charLength:3,hasFocus:!1}},computed:{value:{get(){return this.meta.text},set(e){this.updateWidth(e),this.setText({layer:this.$store.state.keymap.layer,index:this.id,text:e})}}},methods:d(o({},u("keymap",["setText"])),{blur(){this.startListening(),this.hasFocus=!1,this.charLength=3,this.setSelected(void 0)},focus(){this.stopListening(),this.hasFocus=!0,this.charLength=this.value?this.value.length:3,this.$refs.input.selectionStart=this.$refs.input.selectionEnd=1e3},updateWidth(e){this.charLength=e.length},clickignore(){this.stopListening()}})},he={};var va=h(ga,ha,ya,!1,fa,null,null,null);function fa(e){for(let a in he)this[a]=he[a]}var ye=function(){return va.exports}(),_a=qe,ba=Je,ka="[object Number]";function wa(e){return typeof e=="number"||ba(e)&&_a(e)==ka}var ge=wa,xa=ge;function $a(e){return xa(e)&&e!=+e}var Ca=$a,La=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"key key-layer",class:e.myclasses,style:e.mystyles,attrs:{draggable:"",id:e.myid},on:{click:e.clicked,dragstart:e.dragstart,dragend:e.dragend,drop:function(r){return r.stopPropagation(),e.dropped.apply(null,arguments)},dragleave:function(r){return r.preventDefault(),e.dragleave.apply(null,arguments)},dragover:function(r){return r.preventDefault(),e.dragover.apply(null,arguments)},dragenter:function(r){return r.preventDefault(),e.dragenter.apply(null,arguments)}}},[t("div",{class:""+(e.hasFocus?"key-layer-title-focus":"key-layer-title")},[e._v(e._s(e.displayName)),t("div",[t("input",{staticClass:"key-layer-input",class:e.errorClasses,attrs:{type:"number",min:"0",max:"15"},domProps:{value:e.value},on:{focus:e.focus,blur:e.blur,input:e.input}})])]),e.visible?t("div",{staticClass:"remove",on:{click:function(r){return r.stopPropagation(),e.remove.apply(null,arguments)}}},[e._v("x")]):e._e()])},Sa=[];const Ta={name:"layer-key",extends:w,data(){return{error:!1,hasFocus:!1}},computed:d(o({},y("keymap",{curLayer:"layer"})),{value(){return this.meta.layer},errorClasses(){return this.error?"input-error":""}}),methods:d(o(o(o({},u("app",["setHasErrors","setHasNoErrors"])),u("keymap",["setText"])),b("keymap",["setKeycodeLayer"])),{input(e){const a=parseInt(e.target.value,10);!Ca(a)&&ge(a)&&(this.error=a<0||a>15,this.error||this.setKeycodeLayer({layer:this.curLayer,index:this.id,toLayer:a})),this.error?this.setHasErrors():this.setHasNoErrors()},blur(){this.startListening(),this.setSelected(void 0),this.hasFocus=!1},focus(){this.stopListening(),this.hasFocus=!0}})},ve={};var Ka=h(Ta,La,Sa,!1,Fa,null,null,null);function Fa(e){for(let a in ve)this[a]=ve[a]}var fe=function(){return Ka.exports}(),Na=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"key key-container",class:e.myclasses,style:e.mystyles,attrs:{draggable:"",id:e.myid},on:{click:e.clicked,dragstart:e.dragstart,dragend:e.dragend,drop:function(r){return r.stopPropagation(),e.droppedContents.apply(null,arguments)},dragover:function(r){return r.preventDefault(),e.dragover.apply(null,arguments)},dragenter:e.dragenter,dragleave:e.dragleave}},[t("div",[e._v(e._s(e.displayName)),t("div",{staticClass:"key-contents",class:e.contentClasses,on:{dragenter:function(r){return r.preventDefault(),e.dragenterContents.apply(null,arguments)},dragleave:function(r){return r.preventDefault(),e.dragleaveContents.apply(null,arguments)},click:function(r){return r.preventDefault(),r.stopPropagation(),e.clickContents.apply(null,arguments)}}},[e._v(e._s(e.contents))])]),e.visible?t("div",{staticClass:"remove",on:{click:function(r){return r.stopPropagation(),e.remove.apply(null,arguments)}}},[e._v("x")]):e._e()])},Ea=[];const ja={name:"container-key",extends:w,data(){return{value:this.meta.text,contentsInHover:!1}},computed:{contents(){return this.meta.contents?this.formatName(this.meta.contents.name):""},contentClasses(){let e=[];return this.contentsInHover&&e.push("overme"),this.isContentSelected&&e.push("keycode-select"),console.log("contentClasses ",e),e.join(" ")}},methods:d(o({},u("keymap",["setContents"])),{dragenterContents(e){e.target.classList.contains("key-contents")&&(this.contentsInHover=!0)},dragleaveContents(){this.contentsInHover=!1},droppedContents(e){if(e.target.classList.contains("key-contents")){console.log("drop on contents ",e);let a=JSON.parse(e.dataTransfer.getData("application/json"));return c(a.type)&&this.setContents({index:this.id,key:{name:a.name,code:a.code,type:a.type}}),this.dragleave(e),this.dragleaveContents(e),!0}return this.dropped(e)}})},_e={};var Da=h(ja,Na,Ea,!1,Oa,null,null,null);function Oa(e){for(let a in _e)this[a]=_e[a]}var be=function(){return Da.exports}(),Ra=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"key key-container",class:e.myclasses,style:e.mystyles,attrs:{draggable:"",id:e.myid,title:e.mytitle},on:{click:e.clicked,dragstart:e.dragstart,dragend:e.dragend,drop:function(r){return r.stopPropagation(),e.droppedContents.apply(null,arguments)},dragover:function(r){return r.preventDefault(),e.dragover.apply(null,arguments)},dragenter:e.dragenter,dragleave:e.dragleave}},[t("div",[e._v("LT "+e._s(e.meta.layer)),t("div",{staticClass:"key-contents",class:e.contentClasses,on:{dragenter:function(r){return r.preventDefault(),e.dragenterContents.apply(null,arguments)},dragleave:function(r){return r.preventDefault(),e.dragleaveContents.apply(null,arguments)},click:function(r){return r.preventDefault(),r.stopPropagation(),e.clickContents.apply(null,arguments)}}},[e._v(e._s(e.contents))])]),e.visible?t("div",{staticClass:"remove",on:{click:function(r){return r.stopPropagation(),e.remove.apply(null,arguments)}}},[e._v("x")]):e._e()])},Ua=[];const za={name:"layer-container-key",extends:w,data(){return{value:this.meta.text,contentsInHover:!1}},computed:{mytitle(){const e=this.meta.contents&&this.meta.contents.code||"KC_NO";return`LT(${this.meta.layer}, ${e})`},contents(){return this.meta.contents?this.formatName(this.meta.contents.name):""},contentClasses(){let e=[];return this.contentsInHover&&e.push("overme"),this.isContentSelected&&e.push("keycode-select"),console.log("contentClasses ",e),e.join(" ")}},methods:d(o({},u("keymap",["setContents"])),{dragenterContents(e){e.target.classList.contains("key-contents")&&(this.contentsInHover=!0)},dragleaveContents(){this.contentsInHover=!1},droppedContents(e){if(e.target.classList.contains("key-contents")){console.log("drop on contents ",e);let a=JSON.parse(e.dataTransfer.getData("application/json"));return c(a.type)&&this.setContents({index:this.id,key:{name:a.name,code:a.code,type:a.type,layer:a.layer}}),this.dragleave(e),this.dragleaveContents(e),!0}return this.dropped(e)}})},ke={};var Aa=h(za,Ra,Ua,!1,Ia,null,null,null);function Ia(e){for(let a in ke)this[a]=ke[a]}var Pa=function(){return Aa.exports}(),Ma=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{style:e.styles,attrs:{id:"visual-keymap"}},[e._l(e.currentLayer,function(r){return[t("transition",{key:r.id,attrs:{name:"fade",appear:""}},[t(e.getComponent(r),e._b({key:r.id,tag:"component"},"component",r,!1))],1)]})],2)},Ba=[];const qa={name:"visual-keymap",extends:Ze,props:{profile:Boolean,debug:{type:Boolean,default:!1}},watch:{layout(e,a){this.profile&&console.time("layout"),!c(e)&&!this.isLayoutUIUpdate(e,a)&&e!==a?this.recalcEverything(e):c(e)&&!c(a)&&a!==""&&this.recalcEverything(a),this.profile&&console.timeEnd("layout")}},computed:d(o(o(o({},y("keymap",["config","displaySizes","layer"])),v("keymap",["getLayer","loadingKeymapPromise","colorway","defaults"])),y("app",["layout","layouts","previewRequested"])),{currentLayer(){const e=this.layouts[this.layout],a=this.getLayer(this.layer);if(c(e)||c(a))return[];if(this.loadingKeymapPromise){const s=this.loadingKeymapPromise;this.setLoadingKeymapPromise(void 0),s()}this.profile&&console.time("currentLayer");const t=this.colorway;let r=e.map((s,i)=>{let l=Object.assign({w:1,h:1},s);const p=this.calcKeyKeymapPos(l.x,l.y),g=this.calcKeyKeymapDims(l.w,l.h);return Object.assign({id:i,layer:this.layer,meta:a[i],colorway:t,displaySizes:this.displaySizes},p,g)});return this.profile&&console.timeEnd("currentLayer"),r}}),methods:d(o(o(o({},u("keymap",["changeLayer","clear","initKeymap","resetConfig","resizeConfig","setLoadingKeymapPromise"])),u("status",["append"])),b("status",["scrollToEnd"])),{isLayoutUIUpdate(e,a){return e===""||a===""},getComponent(e){const{meta:a}=e;if(a===void 0)return this.debug&&console.log(`key ${e.id} has undefined metadata`),w;switch(a.type){case"container":return be;case"layer":return fe;case"layer-container":return Pa;case"text":return ye;default:return w}},setSize(e){this.width=e.x,this.height=e.y},recalcEverything(e){this.profile&&console.time("layout::reset"),this.resetConfig(),this.changeLayer(0),this.profile&&console.time("layout::initkeymap"),this.getLayer(0).length===0&&this.initKeymap({layer:0,layout:this.layouts[e]}),this.profile&&console.timeEnd("layout::initkeymap"),this.profile&&console.timeEnd("layout::reset"),this.profile&&console.time("layout::scale");const a=this.layouts[e];if(c(a)){const r=`

WARNING: layout ${e} does not exist on this keyboard

`;console.log(r),this.append(r),this.scrollToEnd();return}const t=a.reduce((r,s)=>{let i=Object.assign({w:1,h:1},s);const l=this.calcKeyKeymapPos(i.x,i.y),p=this.calcKeyKeymapDims(i.w,i.h);return r.x=Math.max(r.x,l.x+p.w),r.y=Math.max(r.y,l.y+p.h),r},{x:0,y:0});t.x>this.defaults.MAX_X&&(this.resizeConfig(t),t.x*=this.config.SCALE,t.y*=this.config.SCALE),this.setSize(t),this.profile&&console.timeEnd("layout::scale")}}),data(){return{width:0,height:0}},components:{BaseKey:w,AnyKey:ye,LayerKey:fe,ContainerKey:be}},we={};var Ja=h(qa,Ma,Ba,!1,Ha,null,null,null);function Ha(e){for(let a in we)this[a]=we[a]}var Ya=function(){return Ja.exports}(),Va=Math.ceil,Wa=Math.max;function Ga(e,a,t,r){for(var s=-1,i=Wa(Va((a-e)/(t||1)),0),l=Array(i);i--;)l[r?i:++s]=e,e+=t;return l}var Qa=Ga,Xa=Qa,Za=He,A=Ye;function er(e){return function(a,t,r){return r&&typeof r!="number"&&Za(a,t,r)&&(t=r=void 0),a=A(a),t===void 0?(t=a,a=0):t=A(t),r=r===void 0?a<t?1:-1:A(r),Xa(a,t,r,e)}}var tr=er,ar=tr,rr=ar(!0),sr=rr,ir=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("p",[t("label",[e._v(e._s(e.$t("layer.label"))+":")])]),t("div",{staticClass:"layers"},e._l(e.layers,function(r){return t("div",{key:r.id,staticClass:"layer",class:r.clazz,on:{click:function(s){return e.clicked(r.id)}}},[e._v(e._s(r.name))])}),0),t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("layer.title"),expression:"$t('layer.title')"}],staticClass:"clear-button",on:{click:e.clearLayer}},[t("font-awesome-icon",{attrs:{icon:"trash",size:"lg","fixed-width":""}})],1)])},or=[];const nr={name:"layer-control",computed:d(o(o(o({},y("keymap",["layer"])),y("app",["configuratorSettings"])),v("keymap",["getLayer"])),{layers(){return sr(16).map(a=>{let t=[a],r=this.getLayer(a);return c(r)||t.push("non-empty"),this.layer==a&&t.push("active"),{id:a,name:a,clazz:t.join(" ")}})},defaultClearLayerCode(){return this.configuratorSettings.clearLayerDefault?"KC_TRNS":"KC_NO"}}),methods:d(o({},u("keymap",["changeLayer","initLayer"])),{clicked(e){c(this.getLayer(e))&&this.initLayer({layer:e,code:this.defaultClearLayerCode}),this.changeLayer(e)},clearLayer(){confirm(this.$t("layer.confirm"))&&(this.initLayer({layer:this.layer,code:this.defaultClearLayerCode}),this.$store.commit("keymap/setDirty"))}})},xe={};var lr=h(nr,ir,or,!1,cr,null,null,null);function cr(e){for(let a in xe)this[a]=xe[a]}var dr=function(){return lr.exports}(),ur=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("div",{ref:"console"},[e.appInitialized?t("controllerTop"):e._e(),t("statusPanel"),t("controllerBottom")],1),t("div",{staticClass:"hint hint-right"},[t("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("downloadToolbox.label"),expression:"$t('downloadToolbox.label')"}],attrs:{href:"https://github.com/qmk/qmk_toolbox/releases",target:"_blank",rel:"noopener"}},[e._v(e._s(e.$t("downloadToolbox.label")))])]),t("div",{staticClass:"split-content"},[t("div",{staticClass:"left-side"},[t("layerControl")],1),t("div",{staticClass:"right-side"},[t("div",{staticClass:"keymap--area"},[t("label",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("ColorwayTip.title"),expression:"$t('ColorwayTip.title')"}],staticClass:"keymap--label"},[e._v(" "+e._s(e.$t("keymap.label"))+": "),e.continuousInput?t("font-awesome-icon",{attrs:{icon:"keyboard","fixed-width":""}}):e._e()],1),e._v(" \xA0 "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.curIndex,expression:"curIndex"}],staticClass:"keymap--keyset",attrs:{id:"colorway-select"},on:{change:function(r){var s=Array.prototype.filter.call(r.target.options,function(i){return i.selected}).map(function(i){var l="_value"in i?i._value:i.value;return l});e.curIndex=r.target.multiple?s:s[0]}}},e._l(e.displayColorways,function(r,s){return t("option",{key:s,staticClass:"option",domProps:{value:s}},[e._v(" "+e._s(r)+" ")])}),0),t("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("favoriteColor"),expression:"$t('favoriteColor')"}],class:{active:e.isFavoriteColor},attrs:{id:"favorite-colorway"},on:{click:e.favColor}},[t("font-awesome-icon",{attrs:{icon:"star",size:"lg","fixed-width":""}})],1)]),t("visualKeymap",{attrs:{profile:!1}}),t("span",{staticClass:"keymap--count"},[t("span",{staticClass:"keymap--counter"},[e._v(e._s(e.keyCount))]),e._v("Keys")])],1)])])},pr=[];const mr={name:"Main",props:{},components:{ControllerTop:Yt,StatusPanel:Zt,ControllerBottom:ma,VisualKeymap:Ya,LayerControl:dr},computed:d(o(o(o(o({},y("app",["appInitialized","configuratorSettings"])),v("app",["keyCount"])),y("keymap",["continuousInput"])),v("keymap",["colorwayIndex","colorways","size"])),{curIndex:{get(){return this.colorwayIndex},set(e){this.nextColorway(e)}},displayColorways(){return this.colorways.map(e=>e.replace(/-/g," ").split(" ").map(a=>zt(a)).join(" ").replace(/Gmk/,"GMK").replace(/^Sa/,"SA").replace(/^Dsa/,"DSA").replace(/^Jtk/,"JTK").replace(/Kat/,"KAT").replace(/Wob/,"WOB").replace(/Ta/,"TA").replace(/ ?Plus/g,"+").replace(/ ?Dot ?/g,"."))},redditPost(){return"https://www.reddit.com/r/MechanicalKeyboards/comments/aio97b/qmk_configurator_updates_beta_need_your_input/"},isFavoriteColor(){return this.configuratorSettings.favoriteColor&&this.displayColorways[this.curIndex].toLowerCase()===this.configuratorSettings.favoriteColor.toLowerCase()}}),methods:d(o(o(o({},b("app",["setFavoriteColor","initKeypressListener"])),u("keymap",["nextColorway"])),u("app",["resetListener"])),{favColor(){this.isFavoriteColor?this.setFavoriteColor(""):this.setFavoriteColor(this.displayColorways[this.curIndex])}}),async mounted(){if(await this.initKeypressListener(),this.configuratorSettings.favoriteColor){const e=this.configuratorSettings.favoriteColor.toLowerCase();this.curIndex=this.displayColorways.findIndex(a=>a.toLowerCase()===e)}},beforeDestroy(){this.resetListener()}},$e={};var hr=h(mr,ur,pr,!1,yr,null,null,null);function yr(e){for(let a in $e)this[a]=$e[a]}var gr=function(){return hr.exports}(),vr=Ve,fr=function(){return vr.Date.now()},_r=fr,br=We,I=_r,Ce=Ge,kr="Expected a function",wr=Math.max,xr=Math.min;function $r(e,a,t){var r,s,i,l,p,g,x=0,P=!1,$=!1,N=!0;if(typeof e!="function")throw new TypeError(kr);a=Ce(a)||0,br(t)&&(P=!!t.leading,$="maxWait"in t,i=$?wr(Ce(t.maxWait)||0,a):i,N="trailing"in t?!!t.trailing:N);function E(m){var _=r,C=s;return r=s=void 0,x=m,l=e.apply(C,_),l}function Ee(m){return x=m,p=setTimeout(S,a),P?E(m):l}function je(m){var _=m-g,C=m-x,q=a-_;return $?xr(q,i-C):q}function M(m){var _=m-g,C=m-x;return g===void 0||_>=a||_<0||$&&C>=i}function S(){var m=I();if(M(m))return B(m);p=setTimeout(S,je(m))}function B(m){return p=void 0,N&&r?E(m):(r=s=void 0,l)}function De(){p!==void 0&&clearTimeout(p),x=0,r=g=s=p=void 0}function Oe(){return p===void 0?l:B(I())}function j(){var m=I(),_=M(m);if(r=arguments,s=this,g=m,_){if(p===void 0)return Ee(g);if($)return clearTimeout(p),p=setTimeout(S,a),E(g)}return p===void 0&&(p=setTimeout(S,a)),l}return j.cancel=De,j.flush=Oe,j}var Cr=$r,Lr=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"keycode ui-draggable ui-draggable-handle",class:e.computedClass,style:e.computedStyles,attrs:{draggable:"","data-type":e.type,"data-code":e.code},on:{drag:e.drag,dragstart:e.dragstart,dragend:e.dragend,click:e.clicked,mouseenter:function(r){return e.$emit("mouseenter")},mouseleave:function(r){return e.$emit("mouseleave")}}},[e._v(e._s(e.displayName))])},Sr=[];const Tr={name:"keycode",props:{type:String,code:String,title:String,width:null,name:String,classes:String,styles:Object,layer:Number},computed:{computedStyles(){return this.styles?this.styles:""},computedClass(){let e=[];return c(this.width)||e.push(`keycode-${this.width}`),c(this.type)||e.push(`keycode-${this.type}`),this.dragging&&e.push("dragging"),this.classes&&e.push(this.classes),e.join(" ")},displayName(){return this.name.length===1?this.name.toUpperCase():this.name},displayTitle(){return this.title?`${this.code}
${this.title}`:this.code}},data(){return{dragging:!1,crt:void 0,hidden:void 0}},methods:{dragend(){this.dragging=!1,this.hidden.removeChild(this.crt)},drag(){},dragstart(e){this.crt=this.$el.cloneNode(!0),this.hidden.appendChild(this.crt),e.dataTransfer.setDragImage(this.crt,0,0),this.dragging=!0;let{name:a,code:t,type:r,layer:s}=this;e.dropEffect="copy",e.dataTransfer.dropEffect="move",e.dataTransfer.setData("application/json",JSON.stringify({name:a,type:r,code:t,layer:s}))},clicked(){this.$store.commit("keymap/setKeycode",{_code:this.code,layer:this.layer})}},mounted(){this.hidden=document.getElementsByClassName("qmk-hidden-drag-n-drop")[0]}},Le={};var Kr=h(Tr,Lr,Sr,!1,Fr,null,null,null);function Fr(e){for(let a in Le)this[a]=Le[a]}var Se=function(){return Kr.exports}(),Nr=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"space",class:e.computedClass,attrs:{title:e.label},on:{mouseenter:function(r){return e.$emit("mouseenter")}}},[e._v(" "+e._s(e.label)+"\xA0 "),e.icon?t("span",{class:e.iconClass},[t("font-awesome-icon",{attrs:{icon:e.icon,"fixed-width":""}})],1):e._e()])},Er=[];const jr={name:"space",props:{label:String,width:null,icon:{type:String,default:""},iconClass:{type:String,default:""}},computed:{computedClass(){let e=[];return c(this.width)||e.push(`space-${this.width}`),e}},data(){return{}}},Te={};var Dr=h(jr,Nr,Er,!1,Or,null,null,null);function Or(e){for(let a in Te)this[a]=Te[a]}var Ke=function(){return Dr.exports}(),Rr=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{attrs:{id:"keycodes-section"}},[t("div",{staticStyle:{"text-align":"left","margin-left":"10px"}},[t("p",[t("label",[e._v(e._s(e.$t("keycodes.label"))+":")]),t("span",{staticClass:"hint"},[t("a",{attrs:{href:"https://docs.qmk.fm/#/keycodes",title:e.$t("keycodesRef.label"),target:"_blank",rel:"noopener"}},[e._v(e._s(e.$t("keycodesRef.label")))])])])]),t("div",{attrs:{id:"keycodes"}},[t("div",{staticClass:"tabs"},[e._l(e.keycodesByGroup,function(r,s){return t("span",{key:s,staticClass:"tab",class:e.classes(s),attrs:{title:e.$t("keycodesTab."+s+".label")},on:{click:function(i){return e.changeActive(s)}}},[e._v(e._s(e.$t("keycodesTab."+s+".label"))),e.searchFilter!==""?t("span",[e._v("("+e._s(e.searchCounters[s])+")")]):e._e()])}),t("span",{staticClass:"end-tab"},[t("font-awesome-icon",{staticClass:"keycode-search-icon",attrs:{icon:"search"}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchFilter_,expression:"searchFilter_"}],attrs:{type:"text",placeholder:e.$t("searchKeycodes"),autocomplete:"off",spellcheck:"false"},domProps:{value:e.searchFilter_},on:{focus:e.stopListening,blur:e.startListening,input:function(r){r.target.composing||(e.searchFilter_=r.target.value)}}})],1)],2),t("div",{staticClass:"tab-area"},[e._l(e.activeTab,function(r,s){return[t(e.getComponent(r.code),e._b({key:s,tag:"component",class:e.filterClass(r),on:{mouseenter:function(i){return e.message(r)}}},"component",r,!1))]})],2)])])},Ur=[];const zr={name:"keycodes",components:{Keycode:Se,Space:Ke},props:{},data(){return{clearTimeout:void 0}},mounted(){this.debouncedSetSearchFilter=Cr(this.setSearchFilter,500)},computed:d(o(o(o({},v("keycodes",["keycodes"])),y("app",["configuratorSettings"])),y("keycodes",["searchFilter","searchCounters","active"])),{defaultTab(){return this.configuratorSettings.iso?"ISO/JIS":"ANSI"},activeTab(){return this.keycodesByGroup[this.active]},keycodesByGroup(){let e=this.keycodes.reduce((a,t)=>(t.group?(a[t.label]=[],a.current=t.label):a[a.current].push(t),a),{});return delete e.current,e},searchFilter_:{get(){return this.searchFilter},set(e){this.debouncedSetSearchFilter(e)}}}),methods:d(o(o({},u("app",["setMessage","stopListening","startListening"])),u("keycodes",["setSearchFilter","changeActive"])),{getComponent(e){return c(e)?Ke:Se},classes(e){let a=[];return e===this.active&&a.push("active"),a.join(" ")},message(e){let a="";c(e.code)?a=e.title?e.title:"":a=e.title?`${e.code} - ${e.title}`:e.code,this.setMessage(a),this.messageClear()},messageClear(){this.clearTimeout&&window.clearTimeout(this.clearTimeout),this.clearTimeout=window.setTimeout(()=>{n.commit("app/setMessage","")},3e3)},filterClass(e){if(this.searchFilter===""||c(e.code))return"";const a=this.searchFilter_.toUpperCase();if(!e.code.includes(a)&&!(e.name&&e.name.toUpperCase().includes(a))&&!(e.title&&e.title.toUpperCase().includes(a)))return"desaturated"}})},Fe={};var Ar=h(zr,Rr,Ur,!1,Ir,null,null,null);function Ir(e){for(let a in Fe)this[a]=Fe[a]}var Pr=function(){return Ar.exports}(),Mr=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("div",{staticClass:"main"},[t("Main")],1),t("div",[t("keycodes")],1)])},Br=[];const qr={name:"configurator",components:{Main:gr,Keycodes:Pr},methods:{}},Ne={};var Jr=h(qr,Mr,Br,!1,Hr,null,null,null);function Hr(e){for(let a in Ne)this[a]=Ne[a]}var Qr=function(){return Jr.exports}();export{Qr as default};
